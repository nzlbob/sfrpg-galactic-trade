<form id="entity-create" autocomplete="off" onsubmit="event.preventDefault();" data-gt-cargo-create="true" data-bpvalue="{{BPValue}}" data-goodsbp="{{goods.bp}}" data-goodsprice="{{goods.price}}">
    <div class="form-group">
        <label>{{localize "Cargo Type"}}</label>
        <label>{{name}}</label>
    </div>
    {{#if success}}
    <div class="form-group">
        {{#if buy}}
        <p>Your great skills (DC {{dc}}) found the opportunity to buy {{variation}} additional lots</p>
        {{/if}}
        {{#if sell}}
        <p>Your great skills (DC {{dc}}) found the opportunity to sell at {{variation}}% highher price</p>
        {{/if}}
    </div>
    {{/if}}
    {{#if buy}}
    {{#if pc}}
    {{{cdata}}}
    {{/if}}
    {{/if}}

    <div>
        <hr style="border: 1px solid #ccc; margin: 10px 0;" />
        <p style="font-weight: bold;"> Trade Complication related price adjustments (ask GM)</p>
    </div>
    <div class="form-group">
        <input type="checkbox" name="dn25" {{checked dn25}} /> <label>{{localize "-25%"}}</label>
        <input type="checkbox" name="dn12" {{checked dn12}} /> <label>{{localize "-12%"}}</label>
        <input type="checkbox" name="up12" {{checked up12}} /> <label>{{localize "+12%"}}</label>
        <input type="checkbox" name="up25" {{checked up25}} /> <label>{{localize "+25%"}}</label>

    </div>
    <div>
        <hr style="border: 1px solid #ccc; margin: 10px 0;" />

    </div>
    <div class="form-group">
        <label>{{localize "Unit Mode"}}</label>
        <div style="display:flex;gap:12px;align-items:center;">
            <label><input type="radio" name="unitMode" value="ecr-ton" checked> eCr/Ton</label>
            <label><input type="radio" name="unitMode" value="bp-lot"> BP/Lot</label>
        </div>
    </div>

    <!-- Canonical values used by existing logic -->
    <input type="hidden" name="price" value="{{goods.price}}" />
    <input type="hidden" name="qty" value="{{goods.quantity}}" />

    <!-- eCr / Ton inputs -->
    <div class="form-group gt-ecr-ton">
        <label>{{localize "Negotiated Price (eCr/Ton)"}}</label>
        <input {{#if locksheet}}disabled{{/if}} class="singleLine" type="number" step="0.01" name="price_ecr" value="{{goods.price}}" />
    </div>
    <div class="form-group gt-ecr-ton">
        {{#if sell}}
        <label>{{localize "Qty in Cargo (Tons)"}}</label>
        {{/if}}
        {{#if buy}}
        <label>{{localize "Max Qty Avail (Tons)"}}</label>
        {{/if}}
        <input {{#if locksheet}}disabled{{/if}} class="singleLine" type="number" step="0.01" name="qty_tons" value="{{goods.quantity}}" />
    </div>

    <!-- BP / Lot inputs -->
    <div class="form-group gt-bp-lot" style="display:none;">
        <label>{{localize "Price (BP/Lot)"}}</label>
        <input {{#if locksheet}}disabled{{/if}} class="singleLine" type="number" step="0.01" name="price_bp" value="{{goods.bp}}" />
    </div>
    <div class="form-group gt-bp-lot" style="display:none;">
        <label>{{localize "Quantity (Lots)"}}</label>
        <input {{#if locksheet}}disabled{{/if}} class="singleLine" type="number" step="0.01" name="qty_lots" value="{{goods.lots}}" />
    </div>

    <!-- Totals Preview -->
    <div class="form-group">
        <label>{{localize "Total (preview)"}}</label>
        <div id="gt-total" style="display:flex;flex-direction:column;gap:4px;">
            <span><strong>BP:</strong> <span id="gt-total-bp">0</span></span>
            <span><strong>eCr:</strong> <span id="gt-total-ecr">0</span></span>
        </div>
    </div>


    {{log this}}

</form>